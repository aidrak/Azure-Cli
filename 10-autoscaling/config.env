#!/bin/bash

################################################################################
# Autoscaling Configuration for AVD Deployment
################################################################################

# Load centralized configuration
CENTRALIZED_CONFIG="${CENTRALIZED_CONFIG:-../config/avd-config.sh}"
[[ -f "$CENTRALIZED_CONFIG" ]] && source "$CENTRALIZED_CONFIG"

# ============================================================================
# AZURE ENVIRONMENT
# ============================================================================

export SUBSCRIPTION_ID="${SUBSCRIPTION_ID:-}"
export RESOURCE_GROUP_NAME="${RESOURCE_GROUP_NAME:-RG-Azure-VDI-01}"
export LOCATION="${LOCATION:-centralus}"

# ============================================================================
# SCALING PLAN CONFIGURATION
# ============================================================================

export SCALING_PLAN_NAME="${SCALING_PLAN_NAME:-AVD-Scaling-Plan}"
export HOST_POOL_NAME="${HOST_POOL_NAME:-avd-hostpool}"
export TIMEZONE="${TIMEZONE:-Central Standard Time}"

# ============================================================================
# SCHEDULE SETTINGS
# ============================================================================

# Peak hours (when all VMs should be on)
export PEAK_HOURS_START="${PEAK_HOURS_START:-08:00}"
export PEAK_HOURS_END="${PEAK_HOURS_END:-17:00}"

# Off-peak scaling (gradual shutdown)
export OFFPEAK_START="${OFFPEAK_START:-17:00}"
export OFFPEAK_END="${OFFPEAK_END:-08:00}"

# Minimum VMs during off-peak
export MIN_VMS_OFFPEAK="${MIN_VMS_OFFPEAK:-1}"

# ============================================================================
# LOGGING & ARTIFACTS
# ============================================================================

export LOG_LEVEL="${LOG_LEVEL:-INFO}"
export ENABLE_LOGGING="${ENABLE_LOGGING:-1}"
export ARTIFACTS_DIR="${ARTIFACTS_DIR:-artifacts}"
