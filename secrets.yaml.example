# ==============================================================================
# Azure VDI Deployment - Secrets (Credentials Only)
# ==============================================================================
# This file contains ONLY credentials and secrets.
# All other configuration is dynamic via standards.yaml and Azure discovery.
#
# Usage:
#   1. Copy this file: cp secrets.yaml.example secrets.yaml
#   2. Fill in your credentials
#   3. secrets.yaml is gitignored and will never be committed
#
# ==============================================================================

# ==============================================================================
# Azure Identity (Required)
# ==============================================================================
azure:
  subscription_id: ""           # Your Azure subscription ID
  tenant_id: ""                 # Your Entra ID tenant ID

# ==============================================================================
# VM Credentials (Required for golden image creation)
# ==============================================================================
credentials:
  golden_image:
    admin_username: "localadmin"
    admin_password: ""          # Set a secure password (min 12 chars)

# ==============================================================================
# Optional Secrets
# ==============================================================================
# Uncomment and configure as needed

# VPN Configuration
# vpn:
#   shared_key: ""              # IPsec pre-shared key

# ==============================================================================
# Claude Code Service Principal (for automated authentication)
# ==============================================================================
# This enables Claude Code to authenticate without user intervention.
#
# Setup Steps:
#   1. Create service principal:
#      az ad sp create-for-rbac --name "claude-code-automation" --role Contributor \
#        --scopes "/subscriptions/YOUR_SUBSCRIPTION_ID"
#
#   2. Generate certificate:
#      openssl req -x509 -newkey rsa:4096 -keyout claude.key -out claude.crt \
#        -days 365 -nodes -subj "/CN=claude-code-automation"
#      openssl pkcs12 -export -out claude.pfx -inkey claude.key -in claude.crt
#
#   3. Upload certificate to Azure AD:
#      az ad app credential reset --id "CLIENT_ID" --cert "@claude.crt" --append
#
#   4. Install certificate locally:
#      pwsh -Command "Import-PfxCertificate -FilePath ./claude.pfx -CertStoreLocation Cert:\CurrentUser\My"
#
#   5. Grant MS Graph permissions:
#      az ad app permission add --id "CLIENT_ID" \
#        --api 00000003-0000-0000-c000-000000000000 \
#        --api-permissions 1bfefb4e-e0b5-418b-a88f-73c46d2cc8e9=Role
#      az ad app permission admin-consent --id "CLIENT_ID"
#
service_principal:
  client_id: ""                    # Application (client) ID from az ad sp create
  client_secret: ""                # Client secret (password) for Azure CLI auth
  certificate_thumbprint: ""       # Certificate SHA1 thumbprint for MS Graph auth
  certificate_path: ""             # Optional: Path to .pfx file
